# 2026-01-28 - Architect Session

## Projeto: Extractor Agent (Cargas de Grãos)

### Contexto
Markus pediu para criar um sistema similar ao **zapextractor** (repo: `glucksberg/zapextractor`) mas usando Clawdbot.

### Requisitos
- **Input:** Fotos do grupo WhatsApp "Transporte Contasul" (SILENCIOSO - sem resposta no grupo)
- **Output:** Todo no Telegram com botões de confirmação
- **Event-driven:** Foto postada → OCR dispara automaticamente
- **Dados extraídos:** data_hora, empresa_recebedora, numero_contrato, motorista, placa_caminhao, numero_nf, peso_bruto, subtotal, umidade, descontos, peso_liquido
- **Formato:** Mensagem igual ao zapextractor original com emojis e botões inline (✅ Confirmar / ❌ Tentar Novamente)

### Implementação Feita
1. ✅ Criado agente `extractor` em `/home/dev/clawdbot/agents/extractor/`
   - SOUL.md com prompt de extração OCR
   - AGENTS.md
   - MEMORY.md
   - data/cargas.csv (header)
   - data/cargas.json
   - reports/ (pasta para relatórios)

2. ✅ Habilitado plugin WhatsApp no Clawdbot config
3. ✅ Adicionado agente extractor na lista de agentes (model: claude-sonnet-4)
4. ✅ Gerado QR code para login WhatsApp (enviado para Markus escanear)

### Pendente
- [ ] Markus escanear QR code do WhatsApp
- [ ] Encontrar JID do grupo "Transporte Contasul"
- [ ] Configurar binding do grupo WhatsApp → agente extractor
- [ ] Configurar output para Telegram
- [ ] Testar com imagem de amostra
- [ ] Implementar comandos: /pdf, /csv, /excel, /status, /help, /deletelast

### Arquitetura
```
WhatsApp (Input) → Agente Extractor → Telegram (Output)
     ↓                    ↓                  ↓
Foto silenciosa    Claude Vision OCR    Confirmação + botões
```

### Referência
- Repo original: https://github.com/Glucksberg/zapextractor
- Usa OpenAI Vision, SQLite, Node.js + PM2
- Prompt de extração copiado e adaptado para Claude Vision
